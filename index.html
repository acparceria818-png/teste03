<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Portal de Transporte da AC Parceria e Terraplenagem">
  <meta name="theme-color" content="#b00000" />
  <title>AC Parceria - Portal de Transporte</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="logo.jpg" type="image/jpg">

  <!-- CSS -->
  <link rel="stylesheet" href="styles.css">

  <!-- JS -->
  <script type="module" src="firebase.js"></script>
  <script type="module" src="app.js"></script>
</head>
<body>

<header>
  <img src="Logo.jpg" alt="AC Logo" class="logo" />
  <h1>AC PARCERIA E TERRAPLENAGEM â€” Portal de Transporte</h1>
</header>

<div class="top-actions container">
  <button class="icon-btn" id="installBtn" style="display:none" aria-label="Instalar aplicativo">ğŸ“¥ Instalar</button>
  <button class="icon-btn" id="darkToggle" title="Alternar tema" aria-label="Alternar tema claro/escuro">ğŸŒ™</button>
</div>

<main class="container">

  <!-- TELA DE BOAS VINDAS -->
  <section id="welcome" class="tela ativa" aria-labelledby="welcomeTitle">
    <img src="avatar.png" class="avatar" alt="Avatar AC" />
    <div>
      <h2 id="welcomeTitle">Bem-vindo ao Portal de Transporte</h2>
      <p>Rotas, registro de entrada/saÃ­da e avisos oficiais da <strong>AC Parceria e Terraplenagem</strong>.</p>
      <p class="card" style="margin-top:12px">
        â±ï¸ <strong>Importante:</strong> O formulÃ¡rio de controle de veÃ­culo deve ser preenchido <strong>2Ã— ao dia</strong> â€” ao iniciar a jornada (entrada) e ao finalizar (saÃ­da).
      </p>
      <button class="btn" onclick="entrarNoPortal()">Entrar no Portal</button>
    </div>
  </section>

  <!-- TELA: ESCOLHA DE PERFIL -->
  <section id="telaEscolhaPerfil" class="tela hidden">
    <h2>Como vocÃª estÃ¡ acessando?</h2>

    <div class="card" onclick="selecionarPerfil('motorista')">
      <h3>ğŸš› Motorista</h3>
      <p>Acesso para conduÃ§Ã£o e compartilhamento de rota</p>
    </div>

    <div class="card" onclick="selecionarPerfil('passageiro')">
      <h3>ğŸ§ Passageiro</h3>
      <p>Acompanhe a rota e a localizaÃ§Ã£o do Ã´nibus</p>
    </div>

    <div class="card" onclick="selecionarPerfil('admin')">
      <h3>ğŸ› ï¸ Administrador</h3>
      <p>GestÃ£o, avisos, monitoramento e controle</p>
    </div>
  </section>

  <!-- TELA: LOGIN MOTORISTA -->
  <section id="tela-motorista-login" class="tela hidden">
    <h2>ğŸš› Login do Motorista</h2>
    <p>Informe seus dados para continuar.</p>

    <div class="card">
      <input id="matriculaMotorista" type="text" placeholder="Digite sua matrÃ­cula" class="input" />
      <button class="btn" onclick="confirmarMatriculaMotorista()">Entrar</button>
    </div>

    <button class="btn secondary" onclick="mostrarTela('telaEscolhaPerfil')">â† Voltar</button>
  </section>

  <!-- TELA: PASSAGEIRO -->
  <section id="tela-passageiro" class="tela hidden">
    <h2>ğŸ§ Passageiro</h2>
    <p>Acompanhe sua rota.</p>
    <button class="btn" onclick="mostrarTela('mainMenu')">Ir para o Menu</button>
  </section>

  <!-- TELA: ADMIN -->
  <section id="tela-admin-login" class="tela hidden">
    <h2>ğŸ› ï¸ Administrador</h2>
    <p>Acesso restrito.</p>

    <div class="card">
      <input type="password" placeholder="Senha" class="input" />
      <button class="btn">Entrar</button>
    </div>

    <button class="btn secondary" onclick="mostrarTela('telaEscolhaPerfil')">â† Voltar</button>
  </section>

  <!-- MENU PRINCIPAL -->
  <section id="mainMenu" class="tela hidden" aria-label="Menu principal">
    <h2>Menu</h2>

    <div class="card">
      <a class="btn" href="https://forms.gle/UDniKxPqcMKGUhFQA" target="_blank" rel="noopener noreferrer">
        ğŸ“‹ Preencher Controle de VeÃ­culo (Entrada / SaÃ­da)
      </a>
      <small class="note">Use ao iniciar e ao terminar sua jornada. ObrigatÃ³rio todos os dias.</small>
    </div>

    <div class="card">
      <button class="btn" onclick="openModal('avisosModal')">ğŸ“¢ Avisos & Comunicados</button>
      <small class="note">Leia sempre antes de iniciar a rota.</small>
    </div>

    <div class="card">
      <button class="btn" onclick="openSection('rotasSection')">ğŸ—ºï¸ Selecionar Rota</button>
      <small class="note">Selecione a rota que irÃ¡ conduzir â€” ao clicar, abre o Google Maps com navegaÃ§Ã£o.</small>
    </div>

    <div class="card">
      <button class="btn secondary" onclick="openModal('ajudaModal')">â“ Ajuda / ExplicaÃ§Ã£o dos BotÃµes</button>
      <small class="note">InstruÃ§Ãµes rÃ¡pidas e contatos de suporte.</small>
    </div>
  </section>

  <!-- ROTAS -->
  <section id="rotasSection" class="tela hidden" aria-label="SeleÃ§Ã£o de rotas">
    <h2>Rotas DisponÃ­veis</h2>
    <p>Selecione abaixo a rota que vocÃª irÃ¡ conduzir:</p>

    <div class="routes">
      <!-- Exemplo de rota -->
      <div class="route-item adm">
        <div class="route-info">
          <div style="font-weight:800">ğŸ¢ ROTA ADM 01</div>
          <small style="color:#666">Rota administrativa 01</small>
        </div>
        <button class="btn" onclick="iniciarRota('ROTA ADM 01')">â–¶ï¸ Iniciar Rota</button>
        <a class="btn" href="https://www.google.com/maps/d/u/1/edit?mid=18BCgBpobp1Olzmzy0RnPCUEd7Vnkc5s" target="_blank" rel="noopener noreferrer">Abrir Rota</a>
      </div>
      <!-- Repetir para outras rotas... -->
    </div>

    <div style="margin-top:24px; border-top: 1px solid #eee; padding-top:12px;">
      <button class="btn" onclick="backToMenu()">â† Voltar ao Menu</button>
    </div>
  </section>

  <!-- MODAIS -->
  <div id="avisosModalBack" class="modal-back" aria-hidden="true" style="display:none">
    <div class="modal">
      <button class="close" onclick="closeModal('avisosModalBack')" aria-label="Fechar">âœ•</button>
      <h3>Avisos Importantes</h3>
      <ul>
        <li>Preencher o Controle de VeÃ­culo 2Ã— ao dia (entrada e saÃ­da).</li>
        <li>Mantenha comunicaÃ§Ã£o constante com a gestÃ£o em caso de desvios.</li>
        <li>Relatar imediatamente qualquer avaria ou irregularidade do veÃ­culo.</li>
        <li>NÃ£o alterar rota sem autorizaÃ§Ã£o do setor de operaÃ§Ãµes.</li>
        <li>Para rotas de retorno Overland, verificar sempre as condiÃ§Ãµes da via antes de iniciar.</li>
      </ul>
      <button class="btn" onclick="closeModal('avisosModalBack')">Fechar</button>
    </div>
  </div>

  <div id="ajudaModalBack" class="modal-back" aria-hidden="true" style="display:none">
    <div class="modal">
      <button class="close" onclick="closeModal('ajudaModalBack')" aria-label="Fechar">âœ•</button>
      <h3>Ajuda & ExplicaÃ§Ã£o dos BotÃµes</h3>
      <p><strong>Preencher Controle de VeÃ­culo:</strong> Abre o formulÃ¡rio obrigatÃ³rio (Google Forms).</p>
      <p><strong>Selecionar Rota:</strong> Mostra as rotas publicadas; ao clicar em "Abrir no Maps", o Google Maps serÃ¡ aberto.</p>
      <p><strong>Rotas Operacionais (ğŸš›):</strong> Rotas principais de transporte.</p>
      <p><strong>Rotas Administrativas (ğŸ¢):</strong> Deslocamentos administrativos.</p>
      <p><strong>Rotas de Retorno (ğŸ”„):</strong> Rotas especÃ­ficas para retorno Overland.</p>
      <p><strong>Avisos:</strong> Comunicados importantes.</p>
      <button class="btn" onclick="closeModal('ajudaModalBack')">Fechar</button>
    </div>
  </div>

</main>

</body>
</html>
